import { getTranslations, getLocale } from 'next-intl/server'
import DonationDetails from './DonationDetails'
import SuccessActionButtons from './SuccessActionButtons'

export function generateStaticParams() {
  return [{ locale: 'en' }, { locale: 'zh' }]
}

export async function generateMetadata() {
  const t = await getTranslations('donateSuccess')

  return {
    title: t('title'),
  }
}

export default async function DonateSuccessPage({
  searchParams,
}: {
  searchParams: { order?: string }
}) {
  const locale = await getLocale()
  const orderReference = searchParams.order

  return (
    <div className="min-h-screen bg-gray-50">
      <div className="container mx-auto max-w-4xl px-4 py-12 lg:py-20">
        {/* Donation Details - Client Component with dynamic header */}
        {orderReference && <DonationDetails orderReference={orderReference} locale={locale} />}

        {/* Action Buttons */}
        <SuccessActionButtons />
      </div>
    </div>
  )
}
